{% extends "base.html" %}
{% block content %}

<style>
  .hub-left-panel {
    border-radius: 0.75rem;
    padding: 0.8rem 1rem;
    background-color: #ffffff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }

  .hub-right-panel {
    border-radius: 0.75rem;
    padding: 1rem 1.2rem;
    background-color: #ffffff;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
  }

  .hub-card {
    background-color: #ffffff;
    border-radius: 0.8rem;
    box-shadow: 0 2px 4px rgba(0,0,0,0.05);
    padding: 0.7rem 0.9rem;
    height: 100%;
  }

  .hub-section-title {
    font-size: 0.98rem;
    font-weight: 700;
    margin-bottom: 0.15rem;
  }

  .hub-small-text {
    font-size: 0.8rem;
    margin-bottom: 0.25rem;
  }

  .hub-big-btn {
    font-size: 0.9rem;
    font-weight: 600;
    padding-top: 0.55rem;
    padding-bottom: 0.55rem;
  }

  h3.hub-main-title {
    font-size: 1.25rem;
    margin-bottom: 0.8rem;
  }

  h5.hub-block-title {
    font-size: 1rem;
    margin: 0.3rem 0 0.4rem 0;
  }

  .hub-row {
    margin-bottom: 0.6rem;
  }
</style>

<div class="row g-3">

  <!-- ================== PANEL IZQUIERDO ================== -->
  <div class="col-lg-3">
    <div class="hub-left-panel h-100 d-flex flex-column gap-2">

      <!-- Stats -->
      <div class="hub-card border-0 p-0">
        <h6 class="fw-bold mb-1">Tu personaje</h6>
        <p class="hub-small-text">Usuario: <strong>{{ request.user.username }}</strong></p>
        <p class="hub-small-text">ğŸª™ Monedas: <strong>{{ profile.coins }}</strong></p>
        <p class="hub-small-text mb-1">ğŸ’ RubÃ­es: <strong>{{ profile.rubies }}</strong></p>

        <hr class="my-1">

        <p class="hub-small-text">HP: <strong>{{ stats.hp }}</strong></p>
        <p class="hub-small-text">ATK: <strong>{{ stats.attack }}</strong></p>
        <p class="hub-small-text">DEF: <strong>{{ stats.defense }}</strong></p>
        <p class="hub-small-text">CRIT: <strong>{{ stats.crit_chance }}%</strong></p>
        <p class="hub-small-text">ESQ: <strong>{{ stats.dodge_chance }}%</strong></p>
        <p class="hub-small-text mb-1">VEL: <strong>{{ stats.speed }}</strong></p>
      </div>

      <!-- GestiÃ³n rÃ¡pida -->
      <div class="hub-card border-0 p-0">
        <h6 class="fw-bold mb-2">GestiÃ³n rÃ¡pida</h6>

        <div class="d-flex flex-column gap-1">
          <a href="{% url 'rpg_inventory' %}"
             class="btn btn-primary hub-big-btn rounded-pill w-100">
            ğŸ’ Inventario
          </a>
          <a href="{% url 'rpg_gacha' %}"
             class="btn btn-outline-primary hub-big-btn rounded-pill w-100">
            â­ Gacha
          </a>
          <a href="{% url 'rpg_vip_shop' %}"
             class="btn btn-outline-warning hub-big-btn rounded-pill w-100">
            ğŸ‘‘ Tienda VIP
          </a>
        </div>
      </div>

    </div>
  </div>

  <!-- ================== PANEL DERECHO ================== -->
  <div class="col-lg-9">
    <div class="hub-right-panel">

      <h3 class="fw-bold hub-main-title">RPG â€” Hub principal</h3>

      <!-- PvE -->
      <h5 class="fw-bold hub-block-title">ğŸ—¡ï¸ PvE</h5>
      <div class="row row-cols-1 row-cols-md-3 g-2 hub-row">

        <!-- Torre -->
        <div class="col">
          <div class="hub-card d-flex flex-column">
            <div class="hub-section-title">ğŸ—¼ Torre</div>
            <p class="hub-small-text text-muted">
              Piso: <strong>{{ tower.current_floor }}</strong> /
              MÃ¡x: <strong>{{ tower.max_floor_reached }}</strong>
            </p>
            <a href="{% url 'rpg_tower' %}"
               class="btn btn-primary hub-big-btn rounded-pill w-100 mt-auto">
              Entrar
            </a>
          </div>
        </div>

        <!-- World Boss -->
        <div class="col">
          <div class="hub-card d-flex flex-column">
            <div class="hub-section-title">ğŸ² World Boss</div>
            <p class="hub-small-text text-muted">
              Evento global cooperativo cada 3 horas.
            </p>
            <a href="{% url 'rpg_world_boss' %}"
               class="btn btn-dark hub-big-btn rounded-pill w-100 mt-auto">
              Ir
            </a>
          </div>
        </div>

        <!-- Minijefes -->
        <div class="col">
          <div class="hub-card d-flex flex-column">
            <div class="hub-section-title">ğŸ‘¹ Minijefes</div>
            <p class="hub-small-text text-muted">
              Lobbies cooperativos contra jefes especiales.
            </p>
            <a href="{% url 'rpg_miniboss_hub' %}"
               class="btn btn-warning hub-big-btn rounded-pill w-100 mt-auto">
              Entrar
            </a>
          </div>
        </div>

      </div>

      <!-- PvP -->
      <h5 class="fw-bold hub-block-title mt-1">âš”ï¸ PvP</h5>
      <div class="row row-cols-1 row-cols-md-2 g-2 hub-row">

        <div class="col">
          <div class="hub-card d-flex flex-column">
            <div class="hub-section-title">Arena PvP</div>
            <p class="hub-small-text text-muted">
              DesafÃ­a a jugadores con mejor clasificaciÃ³n.
            </p>
            <div class="d-flex gap-2 mt-auto">
              <a href="{% url 'rpg_pvp_arena' %}"
                 class="btn btn-danger hub-big-btn rounded-pill flex-fill">
                Arena
              </a>
              <a href="{% url 'rpg_pvp_leaderboard' %}"
                 class="btn btn-outline-danger hub-big-btn rounded-pill flex-fill">
                Ranking
              </a>
            </div>
          </div>
        </div>

      </div>

      <!-- Tiendas y economÃ­a -->
      <h5 class="fw-bold hub-block-title mt-1">ğŸ›’ Tiendas y economÃ­a</h5>
      <div class="row row-cols-1 row-cols-md-3 g-2">

        <!-- Tienda & Gacha -->
        <div class="col">
          <div class="hub-card d-flex flex-column">
            <div class="hub-section-title">Tienda & Gacha</div>
            <p class="hub-small-text text-muted">
              Compra bÃ¡sicos o prueba suerte.
            </p>
            <div class="d-flex flex-column gap-1 mt-auto">
              <a href="{% url 'rpg_shop' %}"
                 class="btn btn-outline-secondary hub-big-btn rounded-pill w-100">
                ğŸ›’ Tienda
              </a>
              <a href="{% url 'rpg_gacha' %}"
                 class="btn btn-outline-secondary hub-big-btn rounded-pill w-100">
                â­ Gacha
              </a>
            </div>
          </div>
        </div>

        <!-- Inventario & Trades -->
        <div class="col">
          <div class="hub-card d-flex flex-column">
            <div class="hub-section-title">Inventario & Trades</div>
            <p class="hub-small-text text-muted">
              Gestiona equipo e intercambios.
            </p>
            <div class="d-flex flex-column gap-1 mt-auto">
              <a href="{% url 'rpg_inventory' %}"
                 class="btn btn-outline-secondary hub-big-btn rounded-pill w-100">
                ğŸ’ Inventario
              </a>
              <a href="{% url 'rpg_trades' %}"
                 class="btn btn-outline-secondary hub-big-btn rounded-pill w-100">
                ğŸ” Trades
              </a>
            </div>
          </div>
        </div>

        <!-- Mercado & VIP -->
        <div class="col">
          <div class="hub-card d-flex flex-column">
            <div class="hub-section-title">Mercado & VIP</div>
            <p class="hub-small-text text-muted">
              Mercado entre jugadores y tienda VIP.
            </p>
            <div class="d-flex flex-column gap-1 mt-auto">
              <a href="{% url 'rpg_market' %}"
                 class="btn btn-outline-secondary hub-big-btn rounded-pill w-100">
                ğŸ›ï¸ Mercado
              </a>
              <a href="{% url 'rpg_vip_shop' %}"
                 class="btn btn-outline-warning hub-big-btn rounded-pill w-100">
                ğŸ‘‘ Tienda VIP
              </a>
              {% if request.user.is_superuser %}
              <a href="{% url 'rpg_vip_admin' %}"
                 class="btn btn-outline-danger hub-big-btn rounded-pill w-100">
                âš™ï¸ Admin VIP
              </a>
              {% endif %}
            </div>
          </div>
        </div>

      </div>

    </div>
  </div>

</div>

{% endblock %}
